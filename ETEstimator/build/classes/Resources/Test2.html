<!DOCTYPE html>
<html>
<head>
<script src="http://maps.googleapis.com/maps/api/js?language=en&key=AIzaSyDIT4Hz8j_vQpFZvT9oLl6N0AYCV3ZmKwA&sensor=false">
</script>

<script>
var center1 = new google.maps.LatLng(51.508742,-0.120850);
var map;
var marker;
var infowindow;
var index1 = 0;
 
function initialize()
{
	var mapProp = {
	center:new google.maps.LatLng(51.508742,-0.120850),
	zoom:5,
 
    panControl:true,
    zoomControl:true,
    mapTypeControl:true,
    scaleControl:true,
    streetViewControl:true,
    overviewMapControl:true,
    rotateControl:true,    
    zoomControlOptions: {                                                   
      style:google.maps.ZoomControlStyle.DEFAULT
    },
    mapTypeId:google.maps.MapTypeId.ROADMAP
  
  };
	  
	map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
	marker = new google.maps.Marker({
	    position: new google.maps.LatLng(51.508742,-0.120850),
	    map: map,
	  });
	infowindow = new google.maps.InfoWindow({
		content: 'Latitude: ' + '51.508742' + '<br>Longitude: ' + '-0.120850'
	});
	  infowindow.open(map,marker);
	document.goToLocation = function(x, y) {
            alert("goToLocation, x: " + x +", y:" + y);
            var latLng = new google.maps.LatLng(x, y);
            marker.setPosition(latLng);
            map.setCenter(latLng);
        }
	
	google.maps.event.addListener(map, 'click', function(event) {
		placeMarker(event.latLng);
		app.handle(event.latLng.lat(), event.latLng.lng());
	});  
	

	
}

function get_click_position(event){
            var location = event.latLng;
            var lat = location.lat();
            var lng = location.lng();
            setMarkerPosition(lat, lng);
            app.handle(lat, lng);
}

function setMarkerPosition(lat, lng) {
            var clickLatLng = new google.maps.LatLng(lat, lng);
            marker.setPosition(clickLatLng);
}

function setMapCenter(lat, lng) {
		var latlng = new google.maps.LatLng(lat, lng);
		map.setCenter(latlng);
}

function placeMarker(location) {		
	infowindow.close();
	marker.setPosition(location);
	 
	infowindow = new google.maps.InfoWindow({
	content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng()
	  });
	  infowindow.open(map,marker);
}

google.maps.event.addDomListener(window, 'load', initialize);

</script>
</head>

<body>
<div id="googleMap" style="width:610px;height:215px;"></div>

</html>